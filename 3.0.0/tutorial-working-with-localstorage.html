<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tutorial: Working with localStorage - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BinaryHeap.html">BinaryHeap</a><ul class='methods'><li data-type='method'><a href="BinaryHeap.html#peek">peek</a></li><li data-type='method'><a href="BinaryHeap.html#pop">pop</a></li><li data-type='method'><a href="BinaryHeap.html#push">push</a></li><li data-type='method'><a href="BinaryHeap.html#remove">remove</a></li><li data-type='method'><a href="BinaryHeap.html#removeAll">removeAll</a></li><li data-type='method'><a href="BinaryHeap.html#size">size</a></li></ul></li><li><a href="Cache.html">Cache</a><ul class='methods'><li data-type='method'><a href="Cache.html#destroy">destroy</a></li><li data-type='method'><a href="Cache.html#disable">disable</a></li><li data-type='method'><a href="Cache.html#enable">enable</a></li><li data-type='method'><a href="Cache.html#get">get</a></li><li data-type='method'><a href="Cache.html#info">info</a></li><li data-type='method'><a href="Cache.html#keys">keys</a></li><li data-type='method'><a href="Cache.html#keySet">keySet</a></li><li data-type='method'><a href="Cache.html#put">put</a></li><li data-type='method'><a href="Cache.html#remove">remove</a></li><li data-type='method'><a href="Cache.html#removeAll">removeAll</a></li><li data-type='method'><a href="Cache.html#removeExpired">removeExpired</a></li><li data-type='method'><a href="Cache.html#setCacheFlushInterval">setCacheFlushInterval</a></li><li data-type='method'><a href="Cache.html#setCapacity">setCapacity</a></li><li data-type='method'><a href="Cache.html#setDeleteOnExpire">setDeleteOnExpire</a></li><li data-type='method'><a href="Cache.html#setMaxAge">setMaxAge</a></li><li data-type='method'><a href="Cache.html#setOnExpire">setOnExpire</a></li><li data-type='method'><a href="Cache.html#setOptions">setOptions</a></li><li data-type='method'><a href="Cache.html#setRecycleFreq">setRecycleFreq</a></li><li data-type='method'><a href="Cache.html#setStorageMode">setStorageMode</a></li><li data-type='method'><a href="Cache.html#touch">touch</a></li><li data-type='method'><a href="Cache.html#values">values</a></li></ul></li><li><a href="CacheFactory.html">CacheFactory</a><ul class='methods'><li data-type='method'><a href="CacheFactory.html#clearAll">clearAll</a></li><li data-type='method'><a href="CacheFactory.html#createCache">createCache</a></li><li data-type='method'><a href="CacheFactory.html#destroy">destroy</a></li><li data-type='method'><a href="CacheFactory.html#destroyAll">destroyAll</a></li><li data-type='method'><a href="CacheFactory.html#disableAll">disableAll</a></li><li data-type='method'><a href="CacheFactory.html#enableAll">enableAll</a></li><li data-type='method'><a href="CacheFactory.html#exists">exists</a></li><li data-type='method'><a href="CacheFactory.html#get">get</a></li><li data-type='method'><a href="CacheFactory.html#info">info</a></li><li data-type='method'><a href="CacheFactory.html#keys">keys</a></li><li data-type='method'><a href="CacheFactory.html#keySet">keySet</a></li><li data-type='method'><a href="CacheFactory.html#removeExpiredFromAll">removeExpiredFromAll</a></li><li data-type='method'><a href="CacheFactory.html#touchAll">touchAll</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-cachefactory.html">cachefactory</a></li></ul><h3>Namespaces</h3><ul><li><a href="utils.html">utils</a><ul class='methods'><li data-type='method'><a href="utils.html#.equals">equals</a></li><li data-type='method'><a href="utils.html#.fromJson">fromJson</a></li><li data-type='method'><a href="utils.html#.isFunction">isFunction</a></li><li data-type='method'><a href="utils.html#.isNumber">isNumber</a></li><li data-type='method'><a href="utils.html#.isObject">isObject</a></li><li data-type='method'><a href="utils.html#.isString">isString</a></li><li data-type='method'><a href="utils.html#.toJson">toJson</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-basics.html">The Basics</a></li><li><a href="tutorial-working-with-a-cache.html">Working with a cache</a></li><li><a href="tutorial-working-with-localstorage.html">Working with localStorage</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Tutorial: Working with localStorage</h1>
    

    <section>

<header>
    

    <h2>Working with localStorage</h2>
</header>

<article>
    <pre class="prettyprint source lang-js"><code>import { CacheFactory } from 'cachefactory';

const cacheFactory = new CacheFactory();

// This cache will sync itself with localStorage if it exists, otherwise it
// won't. Every time the browser loads this app, this cache will attempt to
// initialize itself with any data it had already saved to localStorage (or
// sessionStorage if you used that).
const cache = cacheFactory.createCache('my-cache', {
  // Items added to this cache expire after 15 minutes
  maxAge: 15 * 60 * 1000,

  // This cache will clear itself every hour
  cacheFlushInterval: 60 * 60 * 1000,

  // Items will be deleted from this cache right when they expire
  deleteOnExpire: 'aggressive',

  // This cache will use `localStorage`
  storageMode: 'localStorage'
});</code></pre><h2>Using cachefactory in browsers that DON'T support localStorage:</h2><h3>Option 1</h3><p>Do nothing (the cache will just store data in memory)</p>
<h3>Option 2</h3><p>Create/use a polyfill that provides the global <code>localStorage</code> and
<code>sessionStorage</code> objects. CacheFactory will attempt to use these if it finds
them.</p>
<h3>Option 3</h3><p>Tell CacheFactory exactly which polyfill to use (also useful if you just want to
use your own implementation/wrapper for localStorage):</p>
<pre class="prettyprint source lang-js"><code>const localStoragePolyfill = {
  getItem: function (key) { ... },
  setItem: function (key, value) { ... },
  removeItem: function (key) { ... }
};

// Always use the polyfill
const cache = cacheFactory.createCache('my-cache', {
  // Items added to this cache expire after 15 minutes
  maxAge: 15 * 60 * 1000,

  // This cache will clear itself every hour
  cacheFlushInterval: 60 * 60 * 1000,

  // Items will be deleted from this cache right when they expire
  deleteOnExpire: 'aggressive',

  // This cache will use `localStorage`
  storageMode: 'localStorage',

  // CacheFactory will use this polyfill instead of looking for localStorage
  storageImpl: localStoragePolyfill
});

// Conditionally use the polyfill
const options = {
  // Items added to this cache expire after 15 minutes
  maxAge: 15 * 60 * 1000,

  // This cache will clear itself every hour
  cacheFlushInterval: 60 * 60 * 1000,

  // Items will be deleted from this cache right when they expire
  deleteOnExpire: 'aggressive',

  // This cache will use `localStorage`
  storageMode: 'localStorage'
};
if (!window.localStorage) {
  options.storageImpl = localStoragePolyfill;
}
const cache = cacheFactory.createCache('my-cache', options);</code></pre><p>Documentation on the interface that must be implemented by any storageImpl
polyfill used by cachefactory can be found on the W3C Recommendation page for
webstorage. The interface itself looks like:</p>
<pre class="prettyprint source"><code>interface Storage {
  readonly attribute unsigned long length;
  DOMString? key(unsigned long index);
  getter DOMString getItem(DOMString key);
  setter creator void setItem(DOMString key, DOMString value);
  deleter void removeItem(DOMString key);
  void clear();
};</code></pre><p>CacheFactory cares only about these three methods:</p>
<ul>
<li><code>setItem</code></li>
<li><code>getItem</code></li>
<li><code>removeItem</code></li>
</ul>
<p>One developer suggested using <a href="https://github.com/marcuswestin/store.js">store.js</a>
â€”a wrapper and polyfill for localStorage. However, store.js has its own API that
doesn't match that of the webstorage spec, so if you want to use store.js or any
other 3rd-party polyfill then you'll need to create a wrapper for it if it
doesn't have the same API as localStorage.</p>
<p>For example:</p>
<pre class="prettyprint source lang-js"><code>const storeJsToStandard = {
  getItem: store.get,
  setItem: store.set,
  removeItem: store.remove
};

cacheFactory.createCache('my-cache', {
  storageMode: 'localStorage',
  storageImpl: storeJsToStandard
});</code></pre>
</article>

</section>

</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Feb 26 2017 15:33:17 GMT-0800 (PST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>